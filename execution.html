<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Dataloader Module" href="dataloader.html" /><link rel="prev" title="Logging" href="logging.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>Execution Module - Haymaker documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Haymaker  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">Haymaker  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html#dependencies">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1 current has-children current-page"><a class="current reference internal" href="#">Execution Module</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Execution Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dataloader.html">Dataloader Module</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="code.html">Source code</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Source code</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/t1user/haymaker">Download</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/execution.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="execution-module">
<h1>Execution Module<a class="headerlink" href="#execution-module" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>Haymaker trading algorithms consist of a series of Atom components, each implementing a step in a trading algorithm. These components are piped together in an event-driven fashion.</p>
<p>Common trading steps include:</p>
<ul class="simple">
<li><p>Receiving price data.</p></li>
<li><p>Processing, aggregating, or filtering data.</p></li>
<li><p>Generating trading signals.</p></li>
<li><p>Managing the portfolio.</p></li>
<li><p>Controlling risk.</p></li>
<li><p>Managing execution.</p></li>
</ul>
<p>Each processing component (called an “Atom”) inherits from <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.base.Atom</span></code></a>.</p>
<section id="atom-object">
<h2>Atom Object<a class="headerlink" href="#atom-object" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.base.Atom">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.base.</span></span><span class="sig-name descname"><span class="pre">Atom</span></span><a class="reference internal" href="_modules/haymaker/base.html#Atom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Atom" title="Link to this definition">¶</a></dt>
<dd><p>Abstract base object from which all other objects inherit. It’s a basic building
block for creating strategies in Haymaker. Every <code class="docutils literal notranslate"><span class="pre">Atom</span></code> represents a processing
step typically for one traded instrument, thus allowing for separation of concerns.
Connecting <code class="docutils literal notranslate"><span class="pre">Atoms</span></code> creates a processing pipeline.</p>
<p><code class="docutils literal notranslate"><span class="pre">Atoms</span></code> in a pipeline communicate with each other in an event-driven manner
through three methods: <a class="reference internal" href="#haymaker.base.Atom.onStart" title="haymaker.base.Atom.onStart"><code class="xref py py-meth docutils literal notranslate"><span class="pre">onStart()</span></code></a>, <a class="reference internal" href="#haymaker.base.Atom.onData" title="haymaker.base.Atom.onData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">onData()</span></code></a>, <a class="reference internal" href="#haymaker.base.Atom.onFeedback" title="haymaker.base.Atom.onFeedback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">onFeedback()</span></code></a>.
Those methods are called when appropriate <a class="reference external" href="https://eventkit.readthedocs.io/en/latest/api.html#eventkit.event.Event" title="(in eventkit v1.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">eventkit.event.Event</span></code></a> objects are
emitted (respectively <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">feedbackEvent</span></code>),
and emit their own events when they are done processing thus sending a signal to
the next <code class="docutils literal notranslate"><span class="pre">Atom</span></code> in the pipeline that it can start processing.</p>
<p>Users are free to put in those methods any processing logic they want, using any
libraries and tools required. <code class="docutils literal notranslate"><span class="pre">Atoms</span></code> can be connected in any order; unions can be
created by connecting more than one <code class="docutils literal notranslate"><span class="pre">Atom</span></code>; pipelines can be created using
auxiliary class <code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="haymaker.base.Atom.contract">
<span class="sig-name descname"><span class="pre">contract</span></span><a class="headerlink" href="#haymaker.base.Atom.contract" title="Link to this definition">¶</a></dt>
<dd><p>The contract object associated with
this Atom. This can be any <a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.contract.Contract" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.contract.Contract</span></code></a>. On startup
this contract will be qualified and available
<a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.contract.ContractDetails" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.contract.ContractDetails</span></code></a> will be downloaded from broker
and made available through <a class="reference internal" href="#haymaker.base.Atom.details" title="haymaker.base.Atom.details"><code class="xref py py-attr docutils literal notranslate"><span class="pre">details</span></code></a> attribute. If contract
is a <a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.contract.ContFuture" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.contract.ContFuture</span></code></a> or
<a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.contract.Future" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.contract.Future</span></code></a>, it will be replaced with on-the-run
<a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.contract.Future" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.contract.Future</span></code></a>. <cite>ContFuture</cite> will pick contract that
IB considers to be be current, <cite>Future</cite> allows for customization by tweaking
<code class="xref py py-class docutils literal notranslate"><span class="pre">FutureSelector</span></code>. Whichever method is chose, when contract
to be rolled, <a class="reference internal" href="#haymaker.base.Atom.onContractChanged" title="haymaker.base.Atom.onContractChanged"><code class="xref py py-meth docutils literal notranslate"><span class="pre">onContractChanged()</span></code></a> method will be called.</p>
<p>This attribute doesn’t need to be set. If this Atom
object is not related to any one particular contract, just don’t assign any
value to this attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.contract.Contract" title="(in ib_insync v0.9)">ib_insync.contract.Contract</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="haymaker.base.Atom.which_contract">
<span class="sig-name descname"><span class="pre">which_contract</span></span><a class="headerlink" href="#haymaker.base.Atom.which_contract" title="Link to this definition">¶</a></dt>
<dd><p>default: ACTIVE; if NEXT chosen <a class="reference internal" href="#haymaker.base.Atom.contract" title="haymaker.base.Atom.contract"><code class="xref py py-attr docutils literal notranslate"><span class="pre">contract</span></code></a>
will return next contract in chain (relative only for
class:<a href="#id1"><span class="problematic" id="id2">`</span></a>ib_insync.Contract.Future`futures) allowing for using upcoming
contracts for new positions a short period before they become active
(length of this period can be in defined in config.)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ActiveNext</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="haymaker.base.Atom.ib">
<span class="sig-name descname"><span class="pre">ib</span></span><a class="headerlink" href="#haymaker.base.Atom.ib" title="Link to this definition">¶</a></dt>
<dd><p>The instance of the <a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.ib.IB" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.ib.IB</span></code></a> client used
for interacting with the broker. It can be used to communicate with
the broker if neccessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ClassVar[ibi.IB]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="haymaker.base.Atom.sm">
<span class="sig-name descname"><span class="pre">sm</span></span><a class="headerlink" href="#haymaker.base.Atom.sm" title="Link to this definition">¶</a></dt>
<dd><p>Access to <code class="xref py py-class docutils literal notranslate"><span class="pre">StateMachine</span></code> which is
Haymaker’s central collection of information about current positions,
orders and state of strategies.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ClassVar[StateMachine]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="haymaker.base.Atom.contracts">
<span class="sig-name descname"><span class="pre">contracts</span></span><a class="headerlink" href="#haymaker.base.Atom.contracts" title="Link to this definition">¶</a></dt>
<dd><p>A collection of all contracts
currently in use.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ClassVar[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[ibi.Contract]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="haymaker.base.Atom.events">
<span class="sig-name descname"><span class="pre">events</span></span><a class="headerlink" href="#haymaker.base.Atom.events" title="Link to this definition">¶</a></dt>
<dd><p>Collection of <code class="xref py py-class docutils literal notranslate"><span class="pre">eventkit.Event</span></code> objects
used by <code class="docutils literal notranslate"><span class="pre">Haymaker</span></code>, i.e. <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code>,
<code class="xref py py-attr docutils literal notranslate"><span class="pre">feedbackEvent</span></code>, appropriate methods should use these events to
communicate with other objects in the chain, e.g. <a class="reference internal" href="#haymaker.base.Atom.onStart" title="haymaker.base.Atom.onStart"><code class="xref py py-meth docutils literal notranslate"><span class="pre">onStart()</span></code></a> after
processing incoming data should pass the result to the next object
by calling <cite>self.dataEvent.emit(data)</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ClassVar[Sequence[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Atom.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">targets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Atom.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Atom.connect" title="Link to this definition">¶</a></dt>
<dd><p>Connect appropriate events and methods to subsequent <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a>
object(s) in the chain. Shorthand for this method is <cite>+=</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>targets</strong> (<a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><em>Atom</em></a>) – One or more <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> objects to connect to.
If more than one object passed, they will be connected directly
in a <cite>one-to-many</cite> fashion. If the intention is to create
a chain of objects, use <a class="reference internal" href="#haymaker.base.Atom.pipe" title="haymaker.base.Atom.pipe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pipe()</span></code></a> instead.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The updated <cite>Atom</cite> object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom">Atom</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="haymaker.base.Atom.details">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">details</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#haymaker.base.Details" title="haymaker.base.Details"><span class="pre">Details</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#haymaker.base.Details" title="haymaker.base.Details"><span class="pre">Details</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DetailsContainer</span></em><a class="headerlink" href="#haymaker.base.Atom.details" title="Link to this definition">¶</a></dt>
<dd><p>Contract details received from the broker.</p>
<p>If <a class="reference internal" href="#haymaker.base.Atom.contract" title="haymaker.base.Atom.contract"><code class="xref py py-attr docutils literal notranslate"><span class="pre">contract</span></code></a> is set, <a class="reference internal" href="#haymaker.base.Atom.details" title="haymaker.base.Atom.details"><code class="xref py py-attr docutils literal notranslate"><span class="pre">details</span></code></a> will be returned
only for this contract, otherwise <a class="reference internal" href="#haymaker.base.Atom.details" title="haymaker.base.Atom.details"><code class="xref py py-attr docutils literal notranslate"><span class="pre">details</span></code></a> will return
a dictionary of all available details,
ie. <code class="xref py py-class docutils literal notranslate"><span class="pre">dict`[:class:`ibi.Contract</span></code>, <a class="reference internal" href="#haymaker.base.Details" title="haymaker.base.Details"><code class="xref py py-class docutils literal notranslate"><span class="pre">Details</span></code></a>]</p>
<p><a class="reference internal" href="#haymaker.base.Details" title="haymaker.base.Details"><code class="xref py py-class docutils literal notranslate"><span class="pre">Details</span></code></a> is a wrapper around
<a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.contract.ContractDetails" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.contract.ContractDetails</span></code></a> with some
additional methods and attributes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Atom.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">targets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Atom.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Atom.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Disconnect passed <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> objects, which are directly
connected to this atom. Shorthand for this method is <cite>-=</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>targets</strong> (<a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><em>Atom</em></a>) – One or more <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> objects to disconnect from.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Self</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Atom.onContractChanged">
<span class="sig-name descname"><span class="pre">onContractChanged</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_contract</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Atom.onContractChanged"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Atom.onContractChanged" title="Link to this definition">¶</a></dt>
<dd><p>Will be called if contract object on <cite>self.contract</cite> changes.
In particular, this happens when future contract is about to
expire, and new on-the-run contract replaces old, expiring
contract.  This method should be used to initialize any
adjustment required on the object in relation to contract
rolling.  Actual position rolling is taken care of by
<cite>Controller</cite> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Awaitable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Atom.onData">
<span class="sig-name descname"><span class="pre">onData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Atom.onData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Atom.onData" title="Link to this definition">¶</a></dt>
<dd><p>Connected to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> of the preceding object in the chain.
This is the entry point to any processing perfmormed by this
object.  Result of this processing should be added to the
<cite>data</cite> dict and passed to the subsequent object in the chain
using <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> (by calling <cite>self.dataEvent.emit(data)</cite>).</p>
<p>It’s up to the user to emit <cite>dataEvent</cite> with appropriate data,
this event will NOT be emitted by the system, so if it’s not
properly implemented, event chain will be broken.  This method
must be obligatorily overriden in a subclass.</p>
<p>Calling superclass on exit will add a timestamp with object’s
name to <cite>data</cite>, which may be useful for logging.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Awaitable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Atom.onFeedback">
<span class="sig-name descname"><span class="pre">onFeedback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Atom.onFeedback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Atom.onFeedback" title="Link to this definition">¶</a></dt>
<dd><p>Connected to <code class="xref py py-attr docutils literal notranslate"><span class="pre">feedbackEvent</span></code> of the subsequent object in the
chain.  Allows for passing of information about trading
results.  It’s optional to use it, if used, overriden method
must emit <cite>feedbackEvent</cite> with appropriate data.  If not
overriden, it will just pass received data to the previous
object in the chain.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Awaitable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Atom.onStart">
<span class="sig-name descname"><span class="pre">onStart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Atom.onStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Atom.onStart" title="Link to this definition">¶</a></dt>
<dd><p>Perform any initilization required on system (re)start.  It
will be run automatically and it will be linked to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> of the preceding object in the chain.</p>
<p>First <cite>Atom</cite> in a pipeline (typically a data streamer) will
be called by system, which is an indication that (re)start is
in progress and we have successfully connected to the broker.</p>
<p><cite>data</cite> by default is a dict and all keys on this dict are
being set as properties on the object.  Any information that
needs to be passed to atoms down the chain, should be appended
to <cite>data</cite> without removing any existing keys.</p>
<p>If overriding the class, call superclass; call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">super().onStart(data)()</span></code> should be the last line in overriden
method; don’t manually emit <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> in subclass.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Atom.pipe">
<span class="sig-name descname"><span class="pre">pipe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">targets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Atom.pipe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Atom.pipe" title="Link to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#haymaker.base.Pipe" title="haymaker.base.Pipe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipe</span></code></a> or a chain of connected <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> objects.
Only first <cite>target</cite> will be directly connected to this object, second
target will be connected to the first target and so on. It’s different
from <a class="reference internal" href="#haymaker.base.Atom.connect" title="haymaker.base.Atom.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connect()</span></code></a> method, which connects all targets directly to
this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#haymaker.base.Pipe" title="haymaker.base.Pipe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipe</span></code></a> object with all targets connected in a chain,
where this object is the first and the last target is the last
target in the list of passed targets.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#haymaker.base.Pipe" title="haymaker.base.Pipe">Pipe</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<section id="auxiliary-objects">
<h3>Auxiliary Objects<a class="headerlink" href="#auxiliary-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.base.Pipe">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.base.</span></span><span class="sig-name descname"><span class="pre">Pipe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">targets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Pipe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Pipe" title="Link to this definition">¶</a></dt>
<dd><p>Auxiliary object for conneting several <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> objects. Atoms to be connected
need to passed in the right order at initialization.  <a class="reference internal" href="#haymaker.base.Pipe" title="haymaker.base.Pipe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipe</span></code></a> itself is
a subclass of <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a>, so it can be connected
to other <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> (or <a class="reference internal" href="#haymaker.base.Pipe" title="haymaker.base.Pipe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipe</span></code></a>) and all <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> attributes
and methods are available.</p>
<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Pipe.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">targets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Pipe.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Pipe.connect" title="Link to this definition">¶</a></dt>
<dd><p>Connect appropriate events and methods to subsequent <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a>
object(s) in the chain. Shorthand for this method is <cite>+=</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>targets</strong> (<a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><em>Atom</em></a>) – One or more <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> objects to connect to.
If more than one object passed, they will be connected directly
in a <cite>one-to-many</cite> fashion. If the intention is to create
a chain of objects, use <code class="xref py py-meth docutils literal notranslate"><span class="pre">pipe()</span></code> instead.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The updated <cite>Atom</cite> object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom">Atom</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Pipe.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">targets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Pipe.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Pipe.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Disconnect passed <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> objects, which are directly
connected to this atom. Shorthand for this method is <cite>-=</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>targets</strong> (<a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><em>Atom</em></a>) – One or more <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom</span></code></a> objects to disconnect from.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Self</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Pipe.onData">
<span class="sig-name descname"><span class="pre">onData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Pipe.onData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Pipe.onData" title="Link to this definition">¶</a></dt>
<dd><p>Connected to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> of the preceding object in the chain.
This is the entry point to any processing perfmormed by this
object.  Result of this processing should be added to the
<cite>data</cite> dict and passed to the subsequent object in the chain
using <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> (by calling <cite>self.dataEvent.emit(data)</cite>).</p>
<p>It’s up to the user to emit <cite>dataEvent</cite> with appropriate data,
this event will NOT be emitted by the system, so if it’s not
properly implemented, event chain will be broken.  This method
must be obligatorily overriden in a subclass.</p>
<p>Calling superclass on exit will add a timestamp with object’s
name to <cite>data</cite>, which may be useful for logging.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Pipe.onFeedback">
<span class="sig-name descname"><span class="pre">onFeedback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Pipe.onFeedback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Pipe.onFeedback" title="Link to this definition">¶</a></dt>
<dd><p>Connected to <code class="xref py py-attr docutils literal notranslate"><span class="pre">feedbackEvent</span></code> of the subsequent object in the
chain.  Allows for passing of information about trading
results.  It’s optional to use it, if used, overriden method
must emit <cite>feedbackEvent</cite> with appropriate data.  If not
overriden, it will just pass received data to the previous
object in the chain.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Pipe.onStart">
<span class="sig-name descname"><span class="pre">onStart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Pipe.onStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Pipe.onStart" title="Link to this definition">¶</a></dt>
<dd><p>Perform any initilization required on system (re)start.  It
will be run automatically and it will be linked to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> of the preceding object in the chain.</p>
<p>First <cite>Atom</cite> in a pipeline (typically a data streamer) will
be called by system, which is an indication that (re)start is
in progress and we have successfully connected to the broker.</p>
<p><cite>data</cite> by default is a dict and all keys on this dict are
being set as properties on the object.  Any information that
needs to be passed to atoms down the chain, should be appended
to <cite>data</cite> without removing any existing keys.</p>
<p>If overriding the class, call superclass; call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">super().onStart(data)()</span></code> should be the last line in overriden
method; don’t manually emit <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> in subclass.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.base.Details">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.base.</span></span><span class="sig-name descname"><span class="pre">Details</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">details</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Details"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Details" title="Link to this definition">¶</a></dt>
<dd><p>Wrapper object for <a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.contract.ContractDetails" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.contract.ContractDetails</span></code></a> extracting
and processing information that’s most relevant for Haymaker.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="haymaker.base.Details.details">
<span class="sig-name descname"><span class="pre">details</span></span><a class="headerlink" href="#haymaker.base.Details.details" title="Link to this definition">¶</a></dt>
<dd><p>The original contract details object.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ibi.ContractDetails</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="haymaker.base.Details.trading_hours">
<span class="sig-name descname"><span class="pre">trading_hours</span></span><a class="headerlink" href="#haymaker.base.Details.trading_hours" title="Link to this definition">¶</a></dt>
<dd><p>List of tuples with
start and end of trading hours for this contract.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>[datetime, datetime]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="haymaker.base.Details.liquid_hours">
<span class="sig-name descname"><span class="pre">liquid_hours</span></span><a class="headerlink" href="#haymaker.base.Details.liquid_hours" title="Link to this definition">¶</a></dt>
<dd><p>List of tuples with
start and end of liquid hours for this contract.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)">tuple</a>[datetime, datetime]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Details.is_liquid">
<span class="sig-name descname"><span class="pre">is_liquid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_now</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Details.is_liquid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Details.is_liquid" title="Link to this definition">¶</a></dt>
<dd><p>Given current time check if the market is during liquid hours
for underlying contract.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_now</strong> (<em>Optional</em><em>[</em><em>datetime</em><em>]</em><em>, </em><em>optional</em>) – . Defaults to None.</p></li>
<li><p><strong>when</strong> (<em>If not provided current time will be used. Only situation</em>)</p></li>
<li><p><strong>testing.</strong> (<em>it's useful to provide _now is in</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if market is liquid, False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Details.is_open">
<span class="sig-name descname"><span class="pre">is_open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_now</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Details.is_open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Details.is_open" title="Link to this definition">¶</a></dt>
<dd><p>Given current time check if the market is open for underlying contract.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_now</strong> (<em>Optional</em><em>[</em><em>datetime</em><em>]</em><em>, </em><em>optional</em>) – Defaults to None.</p></li>
<li><p><strong>when</strong> (<em>If not provided current time will be used. Only situation</em>)</p></li>
<li><p><strong>testing.</strong> (<em>it's useful to provide _now is in</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if market is open, False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.base.Details.next_open">
<span class="sig-name descname"><span class="pre">next_open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_now</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/base.html#Details.next_open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.base.Details.next_open" title="Link to this definition">¶</a></dt>
<dd><p>Return time of nearest market re-open (regardless if market is
open now).  Should be used after it has been tested that
<code class="xref py py-meth docutils literal notranslate"><span class="pre">is_active()</span></code> is False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_now</strong> (<em>Optional</em><em>[</em><em>datetime</em><em>]</em><em>, </em><em>optional</em>) – Defaults to None.</p></li>
<li><p><strong>when</strong> (<em>If not provided current time will be used. Only situation</em>)</p></li>
<li><p><strong>testing.</strong> (<em>it's useful to provide _now is in</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="strategy-building-components">
<h2>Strategy Building Components<a class="headerlink" href="#strategy-building-components" title="Link to this heading">¶</a></h2>
<p>Building on <a class="reference internal" href="#haymaker.base.Atom" title="haymaker.base.Atom"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.base.Atom</span></code></a>, Haymaker offers skeletons of several components addressing typical requirements in building trading strategies:</p>
<ul>
<li><p><strong>Streamer</strong>: Connects to the broker and pipes market data.</p></li>
<li><p><strong>Aggregator</strong>: Custom aggregation or processing of market data before signal generation.</p></li>
<li><p><strong>Brick</strong>: Generates trading signals; this is the core building block of strategies (like bricks in a house).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have an idea for a better name, email me! :)</p>
</div>
</li>
<li><p><strong>Signal Processor</strong>: Filters or processes signals based on strategy state or auxiliary data, determining whether signals should trigger orders.</p></li>
<li><p><strong>Portfolio</strong>: A global object that receives processed signals and translates them into allocations (e.g., amounts of instruments to trade). It uses data like account value, holdings, volatility, risk targets, and concentration limits.</p></li>
<li><p><strong>Execution Model</strong>: Issues actual broker orders based on target instrument amounts.</p></li>
</ul>
<p>Below is a review of how to use pre-built component modules:</p>
<section id="streamer">
<h3>Streamer<a class="headerlink" href="#streamer" title="Link to this heading">¶</a></h3>
<p>Haymaker provides streamers corresponding to all <cite>ib_insync</cite> market data subscriptions:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ib_insync Method</p></th>
<th class="head"><p>Streamer</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>reqHistoricalDataAsync</p></td>
<td><p>HistoricalDataStreamer</p></td>
</tr>
<tr class="row-odd"><td><p>reqMktData</p></td>
<td><p>MktDataStreamer</p></td>
</tr>
<tr class="row-even"><td><p>reqRealTimeBars</p></td>
<td><p>RealTimeBarsStreamer</p></td>
</tr>
<tr class="row-odd"><td><p>reqTickByTickData</p></td>
<td><p>TickByTickStreamer</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<p>All streamers extend <a class="reference internal" href="#haymaker.streamers.Streamer" title="haymaker.streamers.Streamer"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.streamers.Streamer</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.streamers.Streamer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.streamers.</span></span><span class="sig-name descname"><span class="pre">Streamer</span></span><a class="reference internal" href="_modules/haymaker/streamers.html#Streamer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.Streamer" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.streamers.Streamer.awaitables">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">awaitables</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#Streamer.awaitables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.Streamer.awaitables" title="Link to this definition">¶</a></dt>
<dd><p>Coroutines from all instantiated streamers.  Can be passed to
<a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.gather" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.gather()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Awaitable</span></code></a>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.streamers.Streamer.onStart">
<span class="sig-name descname"><span class="pre">onStart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#Streamer.onStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.Streamer.onStart" title="Link to this definition">¶</a></dt>
<dd><p>Perform any initilization required on system (re)start.  It
will be run automatically and it will be linked to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> of the preceding object in the chain.</p>
<p>First <cite>Atom</cite> in a pipeline (typically a data streamer) will
be called by system, which is an indication that (re)start is
in progress and we have successfully connected to the broker.</p>
<p><cite>data</cite> by default is a dict and all keys on this dict are
being set as properties on the object.  Any information that
needs to be passed to atoms down the chain, should be appended
to <cite>data</cite> without removing any existing keys.</p>
<p>If overriding the class, call superclass; call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">super().onStart(data)()</span></code> should be the last line in overriden
method; don’t manually emit <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> in subclass.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.streamers.Streamer.run">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#Streamer.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.Streamer.run" title="Link to this definition">¶</a></dt>
<dd><p>Start subscription and start emitting data.  This is the main
entry point into the streamer.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<section id="implementations">
<h4>Implementations<a class="headerlink" href="#implementations" title="Link to this heading">¶</a></h4>
<p>Every implementation accepts the same arguments as the respective <cite>ib_insync</cite> method it wraps, plus standard <a class="reference internal" href="#haymaker.streamers.Streamer" title="haymaker.streamers.Streamer"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.streamers.Streamer</span></code></a> parameters.</p>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.streamers.HistoricalDataStreamer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.streamers.</span></span><span class="sig-name descname"><span class="pre">HistoricalDataStreamer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">durationStr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">barSizeSetting</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whatToShow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useRTH=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">formatDate=2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incremental_only=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startup_seconds=5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_last_bar_date=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_future_adjust_flag=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_adjusted=&lt;factory&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#HistoricalDataStreamer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.HistoricalDataStreamer" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.streamers.HistoricalDataStreamer.date_to_delta">
<span class="sig-name descname"><span class="pre">date_to_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#HistoricalDataStreamer.date_to_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.HistoricalDataStreamer.date_to_delta" title="Link to this definition">¶</a></dt>
<dd><p>Return number of bars (as per barSizeSetting) since date. Used to determine
number of bars required to backfill since last reset.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.streamers.HistoricalDataStreamer.onContractChanged">
<span class="sig-name descname"><span class="pre">onContractChanged</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_contract</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#HistoricalDataStreamer.onContractChanged"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.HistoricalDataStreamer.onContractChanged" title="Link to this definition">¶</a></dt>
<dd><p>Will be called if contract object on <cite>self.contract</cite> changes.
In particular, this happens when future contract is about to
expire, and new on-the-run contract replaces old, expiring
contract.  This method should be used to initialize any
adjustment required on the object in relation to contract
rolling.  Actual position rolling is taken care of by
<cite>Controller</cite> object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.streamers.HistoricalDataStreamer.onStart">
<span class="sig-name descname"><span class="pre">onStart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#HistoricalDataStreamer.onStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.HistoricalDataStreamer.onStart" title="Link to this definition">¶</a></dt>
<dd><p>Perform any initilization required on system (re)start.  It
will be run automatically and it will be linked to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> of the preceding object in the chain.</p>
<p>First <cite>Atom</cite> in a pipeline (typically a data streamer) will
be called by system, which is an indication that (re)start is
in progress and we have successfully connected to the broker.</p>
<p><cite>data</cite> by default is a dict and all keys on this dict are
being set as properties on the object.  Any information that
needs to be passed to atoms down the chain, should be appended
to <cite>data</cite> without removing any existing keys.</p>
<p>If overriding the class, call superclass; call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">super().onStart(data)()</span></code> should be the last line in overriden
method; don’t manually emit <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> in subclass.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.streamers.HistoricalDataStreamer.run">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#HistoricalDataStreamer.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.HistoricalDataStreamer.run" title="Link to this definition">¶</a></dt>
<dd><p>Start subscription and start emitting data.  This is the main
entry point into the streamer.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.streamers.MktDataStreamer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.streamers.</span></span><span class="sig-name descname"><span class="pre">MktDataStreamer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tickList</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#MktDataStreamer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.MktDataStreamer" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.streamers.RealTimeBarsStreamer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.streamers.</span></span><span class="sig-name descname"><span class="pre">RealTimeBarsStreamer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whatToShow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useRTH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incremental_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#RealTimeBarsStreamer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.RealTimeBarsStreamer" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.streamers.RealTimeBarsStreamer.onStart">
<span class="sig-name descname"><span class="pre">onStart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#RealTimeBarsStreamer.onStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.RealTimeBarsStreamer.onStart" title="Link to this definition">¶</a></dt>
<dd><p>Perform any initilization required on system (re)start.  It
will be run automatically and it will be linked to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> of the preceding object in the chain.</p>
<p>First <cite>Atom</cite> in a pipeline (typically a data streamer) will
be called by system, which is an indication that (re)start is
in progress and we have successfully connected to the broker.</p>
<p><cite>data</cite> by default is a dict and all keys on this dict are
being set as properties on the object.  Any information that
needs to be passed to atoms down the chain, should be appended
to <cite>data</cite> without removing any existing keys.</p>
<p>If overriding the class, call superclass; call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">super().onStart(data)()</span></code> should be the last line in overriden
method; don’t manually emit <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> in subclass.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.streamers.TickByTickStreamer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.streamers.</span></span><span class="sig-name descname"><span class="pre">TickByTickStreamer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tickType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numberOfTicks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignoreSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/streamers.html#TickByTickStreamer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.streamers.TickByTickStreamer" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>
<section id="aggregator">
<h3>Aggregator<a class="headerlink" href="#aggregator" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.aggregators.BarAggregator">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.aggregators.</span></span><span class="sig-name descname"><span class="pre">BarAggregator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incremental_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_adjust_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'add'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#BarAggregator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.BarAggregator" title="Link to this definition">¶</a></dt>
<dd><p>Aggregate recieved data bars into new bars based on the
criteria specified in :attr:<a href="#id3"><span class="problematic" id="id4">`</span></a>filter’. Store processed data.</p>
<dl class="py method">
<dt class="sig sig-object py" id="haymaker.aggregators.BarAggregator.adjust_future">
<span class="sig-name descname"><span class="pre">adjust_future</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_bar</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#BarAggregator.adjust_future"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.BarAggregator.adjust_future" title="Link to this definition">¶</a></dt>
<dd><p>Create continuous future price series on future contract
change.  IB mechanism cannot be trusted.  This feature can be
turned off by passing <cite>future_adjust_type=None</cite> while
initiating the class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.aggregators.BarAggregator.onData">
<span class="sig-name descname"><span class="pre">onData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#BarAggregator.onData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.BarAggregator.onData" title="Link to this definition">¶</a></dt>
<dd><p>This passes correct data to <cite>self._filter</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.aggregators.BarAggregator.onDataBar">
<span class="sig-name descname"><span class="pre">onDataBar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bars</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#BarAggregator.onDataBar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.BarAggregator.onDataBar" title="Link to this definition">¶</a></dt>
<dd><p>This is connected to <cite>self._filter</cite>, will emit whatever comes
from filter.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.aggregators.BarAggregator.onStart">
<span class="sig-name descname"><span class="pre">onStart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#BarAggregator.onStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.BarAggregator.onStart" title="Link to this definition">¶</a></dt>
<dd><p>Perform any initilization required on system (re)start.  It
will be run automatically and it will be linked to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> of the preceding object in the chain.</p>
<p>First <cite>Atom</cite> in a pipeline (typically a data streamer) will
be called by system, which is an indication that (re)start is
in progress and we have successfully connected to the broker.</p>
<p><cite>data</cite> by default is a dict and all keys on this dict are
being set as properties on the object.  Any information that
needs to be passed to atoms down the chain, should be appended
to <cite>data</cite> without removing any existing keys.</p>
<p>If overriding the class, call superclass; call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">super().onStart(data)()</span></code> should be the last line in overriden
method; don’t manually emit <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> in subclass.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
</dd></dl>

</dd></dl>

<section id="available-filters">
<h4>Available Filters<a class="headerlink" href="#available-filters" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.aggregators.CountBars">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.aggregators.</span></span><span class="sig-name descname"><span class="pre">CountBars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#CountBars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.CountBars" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.aggregators.CountBars.on_source">
<span class="sig-name descname"><span class="pre">on_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_bar</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#CountBars.on_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.CountBars.on_source" title="Link to this definition">¶</a></dt>
<dd><p>Emit a new value to all connected listeners.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> – Argument values to emit to listeners.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.aggregators.VolumeBars">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.aggregators.</span></span><span class="sig-name descname"><span class="pre">VolumeBars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">volume</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#VolumeBars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.VolumeBars" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.aggregators.VolumeBars.on_source">
<span class="sig-name descname"><span class="pre">on_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_bar</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#VolumeBars.on_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.VolumeBars.on_source" title="Link to this definition">¶</a></dt>
<dd><p>Emit a new value to all connected listeners.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> – Argument values to emit to listeners.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.aggregators.TickBars">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.aggregators.</span></span><span class="sig-name descname"><span class="pre">TickBars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#TickBars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.TickBars" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.aggregators.TickBars.on_source">
<span class="sig-name descname"><span class="pre">on_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_bar</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#TickBars.on_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.TickBars.on_source" title="Link to this definition">¶</a></dt>
<dd><p>Emit a new value to all connected listeners.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> – Argument values to emit to listeners.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.aggregators.TimeBars">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.aggregators.</span></span><span class="sig-name descname"><span class="pre">TimeBars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#TimeBars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.TimeBars" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.aggregators.TimeBars.on_source">
<span class="sig-name descname"><span class="pre">on_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_bar</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#TimeBars.on_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.TimeBars.on_source" title="Link to this definition">¶</a></dt>
<dd><p>Emit a new value to all connected listeners.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> – Argument values to emit to listeners.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.aggregators.NoFilter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.aggregators.</span></span><span class="sig-name descname"><span class="pre">NoFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#NoFilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.NoFilter" title="Link to this definition">¶</a></dt>
<dd><p>This works as an accumulator making sure that no bars are lost
during restarts.</p>
<dl class="py method">
<dt class="sig sig-object py" id="haymaker.aggregators.NoFilter.on_source">
<span class="sig-name descname"><span class="pre">on_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_bar</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/aggregators.html#NoFilter.on_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.aggregators.NoFilter.on_source" title="Link to this definition">¶</a></dt>
<dd><p>Emit a new value to all connected listeners.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> – Argument values to emit to listeners.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="brick">
<h3>Brick<a class="headerlink" href="#brick" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.brick.AbstractBaseBrick">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.brick.</span></span><span class="sig-name descname"><span class="pre">AbstractBaseBrick</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/brick.html#AbstractBaseBrick"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.brick.AbstractBaseBrick" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.brick.AbstractBaseBrick.onData">
<span class="sig-name descname"><span class="pre">onData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/brick.html#AbstractBaseBrick.onData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.brick.AbstractBaseBrick.onData" title="Link to this definition">¶</a></dt>
<dd><p>Connected to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> of the preceding object in the chain.
This is the entry point to any processing perfmormed by this
object.  Result of this processing should be added to the
<cite>data</cite> dict and passed to the subsequent object in the chain
using <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> (by calling <cite>self.dataEvent.emit(data)</cite>).</p>
<p>It’s up to the user to emit <cite>dataEvent</cite> with appropriate data,
this event will NOT be emitted by the system, so if it’s not
properly implemented, event chain will be broken.  This method
must be obligatorily overriden in a subclass.</p>
<p>Calling superclass on exit will add a timestamp with object’s
name to <cite>data</cite>, which may be useful for logging.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.brick.AbstractBaseBrick.onStart">
<span class="sig-name descname"><span class="pre">onStart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/brick.html#AbstractBaseBrick.onStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.brick.AbstractBaseBrick.onStart" title="Link to this definition">¶</a></dt>
<dd><p>Perform any initilization required on system (re)start.  It
will be run automatically and it will be linked to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> of the preceding object in the chain.</p>
<p>First <cite>Atom</cite> in a pipeline (typically a data streamer) will
be called by system, which is an indication that (re)start is
in progress and we have successfully connected to the broker.</p>
<p><cite>data</cite> by default is a dict and all keys on this dict are
being set as properties on the object.  Any information that
needs to be passed to atoms down the chain, should be appended
to <cite>data</cite> without removing any existing keys.</p>
<p>If overriding the class, call superclass; call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">super().onStart(data)()</span></code> should be the last line in overriden
method; don’t manually emit <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> in subclass.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
</dd></dl>

</dd></dl>

<section id="id5">
<h4>Implementations<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.brick.AbstractDfBrick">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.brick.</span></span><span class="sig-name descname"><span class="pre">AbstractDfBrick</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/brick.html#AbstractDfBrick"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.brick.AbstractDfBrick" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Override <code class="xref py py-meth docutils literal notranslate"><span class="pre">haymaker.brick.AbstractDfBrick.df()</span></code> when creating a concrete <cite>AbstractDfBrick</cite>.</p>
</section>
</section>
<section id="signal-processor">
<h3>Signal Processor<a class="headerlink" href="#signal-processor" title="Link to this heading">¶</a></h3>
<p>To better separate concerns, filter signals received from <a class="reference internal" href="#haymaker.brick.AbstractBaseBrick" title="haymaker.brick.AbstractBaseBrick"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.brick.AbstractBaseBrick</span></code></a> based on strategy state (e.g., avoid repeated signals or re-entering after a stop-out). While this could be done in <a class="reference internal" href="#haymaker.brick.AbstractBaseBrick" title="haymaker.brick.AbstractBaseBrick"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.brick.AbstractBaseBrick</span></code></a>, using a <a class="reference internal" href="#haymaker.signals.BinarySignalProcessor" title="haymaker.signals.BinarySignalProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.signals.BinarySignalProcessor</span></code></a> is more modular.</p>
<p>Available processors are designed for binary signals (on/off switches). For discrete signals (e.g., 0–10 strength), these implementations aren’t suitable, but you can develop custom ones.</p>
<p>It’s easiest to create a binary signal processor by implementing <a class="reference internal" href="#haymaker.signals.AbstractBaseBinarySignalProcessor" title="haymaker.signals.AbstractBaseBinarySignalProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.signals.AbstractBaseBinarySignalProcessor</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.signals.AbstractBaseBinarySignalProcessor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.signals.</span></span><span class="sig-name descname"><span class="pre">AbstractBaseBinarySignalProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'signal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_machine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#AbstractBaseBinarySignalProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.AbstractBaseBinarySignalProcessor" title="Link to this definition">¶</a></dt>
<dd><p>Process binary signals, i.e. long/short/off, as opposed to
descrete signals, where signal strength is meaningful (e.g. signal
assuming values -10…10 based on strength of conviction).</p>
<p>Actual position size or even whether the position should be taken
at all is not determined here, it’s the job of <cite>Portfolio</cite>.</p>
<p>Actual meaning of signals is defined in sub-classes, by overriding
methods: <code class="xref py py-meth docutils literal notranslate"><span class="pre">process_position()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">process_no_position()</span></code>.</p>
<p>Whatever the meaning of the signal coming in, signal coming out
means strategy wants to take <cite>action</cite> in the direction of
<cite>signal</cite>, as indicated by keys <cite>action</cite> and <cite>signal</cite> in the
emitted dict.  Incoming signals that don’t require any action will
be stopped here and not propagated down the chain.</p>
<p>In sub-class names <cite>blip</cite> means zero signal should be ignored,
othewise absence of signal means there should be no position.</p>
<section id="args">
<h4>Args:<a class="headerlink" href="#args" title="Link to this heading">¶</a></h4>
<p>signal_fields - if <cite>str</cite>, single field of this name is used as
signal in (open position) and signal out (close position), if
<cite>tuple</cite> then first element is signal in and second is signal out</p>
<p>state_machine - this is for testing only and should not be passed
in non-testing environment</p>
<dl class="py method">
<dt class="sig sig-object py" id="haymaker.signals.AbstractBaseBinarySignalProcessor.onData">
<span class="sig-name descname"><span class="pre">onData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#AbstractBaseBinarySignalProcessor.onData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.AbstractBaseBinarySignalProcessor.onData" title="Link to this definition">¶</a></dt>
<dd><p>Connected to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> of the preceding object in the chain.
This is the entry point to any processing perfmormed by this
object.  Result of this processing should be added to the
<cite>data</cite> dict and passed to the subsequent object in the chain
using <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> (by calling <cite>self.dataEvent.emit(data)</cite>).</p>
<p>It’s up to the user to emit <cite>dataEvent</cite> with appropriate data,
this event will NOT be emitted by the system, so if it’s not
properly implemented, event chain will be broken.  This method
must be obligatorily overriden in a subclass.</p>
<p>Calling superclass on exit will add a timestamp with object’s
name to <cite>data</cite>, which may be useful for logging.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.signals.AbstractBaseBinarySignalProcessor.position">
<span class="sig-name descname"><span class="pre">position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#AbstractBaseBinarySignalProcessor.position"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.AbstractBaseBinarySignalProcessor.position" title="Link to this definition">¶</a></dt>
<dd><p>Which side of the market is position on: (short: -1, long: 1,
no position: 0)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code></a>[<code class="docutils literal notranslate"><span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">1</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.signals.AbstractBaseBinarySignalProcessor.same_direction">
<span class="sig-name descname"><span class="pre">same_direction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#AbstractBaseBinarySignalProcessor.same_direction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.AbstractBaseBinarySignalProcessor.same_direction" title="Link to this definition">¶</a></dt>
<dd><p>Is signal and position in the same direction?</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</section>
</dd></dl>

<section id="id6">
<h4>Implementations<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.signals.BinarySignalProcessor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.signals.</span></span><span class="sig-name descname"><span class="pre">BinarySignalProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'signal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_machine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#BinarySignalProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.BinarySignalProcessor" title="Link to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Zero signal means close position if position exists</p></li>
<li><p>Non-zero signal means:</p></li>
</ul>
<p>** open new position if there is no position for the strategy</p>
<p>** ignore signal if it’s in the same direction as existing
position</p>
<p>** close position if the signal is in the direction opposite to
existing position</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.signals.BlipBinarySignalProcessor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.signals.</span></span><span class="sig-name descname"><span class="pre">BlipBinarySignalProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'signal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_machine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#BlipBinarySignalProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.BlipBinarySignalProcessor" title="Link to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Zero signal means do nothing</p></li>
<li><p>Non-zero signal means:</p></li>
</ul>
<p>** open new position if there is no position for the strategy</p>
<p>** ignore signal if it’s in the same direction as existing
position</p>
<p>** close position if the signal is in the direction opposite to
existing position</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.signals.LockableBinarySignalProcessor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.signals.</span></span><span class="sig-name descname"><span class="pre">LockableBinarySignalProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'signal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_machine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#LockableBinarySignalProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.LockableBinarySignalProcessor" title="Link to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Signals in the direction of last position are ignored (one side</p></li>
</ul>
<p>of the market is ‘locked’).  It’s up to <code class="xref py py-class docutils literal notranslate"><span class="pre">StateMachine</span></code> to
determine which side is ‘locked’ based on position actually taken
in the market (not just previously generated signals).</p>
<ul class="simple">
<li><p>Zero signal means close position if position exists</p></li>
<li><p>Non-zero signal means:</p></li>
</ul>
<p>** open new position if there is no position for the strategy</p>
<p>** ignore signal if it’s in the same direction as existing
position</p>
<p>** close position if the signal is in the direction opposite to
existing position</p>
<dl class="py method">
<dt class="sig sig-object py" id="haymaker.signals.LockableBinarySignalProcessor.onData">
<span class="sig-name descname"><span class="pre">onData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#LockableBinarySignalProcessor.onData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.LockableBinarySignalProcessor.onData" title="Link to this definition">¶</a></dt>
<dd><p>Connected to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> of the preceding object in the chain.
This is the entry point to any processing perfmormed by this
object.  Result of this processing should be added to the
<cite>data</cite> dict and passed to the subsequent object in the chain
using <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> (by calling <cite>self.dataEvent.emit(data)</cite>).</p>
<p>It’s up to the user to emit <cite>dataEvent</cite> with appropriate data,
this event will NOT be emitted by the system, so if it’s not
properly implemented, event chain will be broken.  This method
must be obligatorily overriden in a subclass.</p>
<p>Calling superclass on exit will add a timestamp with object’s
name to <cite>data</cite>, which may be useful for logging.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.signals.LockableBlipBinarySignalProcessor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.signals.</span></span><span class="sig-name descname"><span class="pre">LockableBlipBinarySignalProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'signal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_machine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#LockableBlipBinarySignalProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.LockableBlipBinarySignalProcessor" title="Link to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Signals in the direction of last position are ignored (one side</p></li>
</ul>
<p>of the market is ‘locked’).  It’s up to <code class="xref py py-class docutils literal notranslate"><span class="pre">StateMachine</span></code> to
determine which side is ‘locked’ based on position actually taken
in the market (not just previously generated signals).</p>
<ul class="simple">
<li><p>Zero signal means do nothing</p></li>
<li><p>Non-zero signal means:</p></li>
</ul>
<p>** open new position if there is no position for the strategy</p>
<p>** ignore signal if it’s in the same direction as existing
position</p>
<p>** close position if the signal is in the direction opposite to
existing position</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.signals.AlwaysOnLockableBinarySignalProcessor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.signals.</span></span><span class="sig-name descname"><span class="pre">AlwaysOnLockableBinarySignalProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'signal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_machine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#AlwaysOnLockableBinarySignalProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.AlwaysOnLockableBinarySignalProcessor" title="Link to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Signals in the direction of last position are ignored (one side</p></li>
</ul>
<p>of the market is ‘locked’).  It’s up to <code class="xref py py-class docutils literal notranslate"><span class="pre">StateMachine</span></code> to
determine which side is ‘locked’ based on position actually taken
in the market (not just previously generated signals).</p>
<ul class="simple">
<li><p>Zero signal means close position if position exists</p></li>
<li><p>Non-zero signal means:</p></li>
</ul>
<p>** open new position if there is no position for the strategy</p>
<p>** ignore signal if it’s in the same direction as existing
position</p>
<p>** reverse position if the signal is in the direction opposite to
existing position</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.signals.AlwaysOnBinarySignalProcessor">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.signals.</span></span><span class="sig-name descname"><span class="pre">AlwaysOnBinarySignalProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'signal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_machine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#AlwaysOnBinarySignalProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.AlwaysOnBinarySignalProcessor" title="Link to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>Zero signal means close position if position exists</p></li>
<li><p>Non-zero signal means:</p></li>
</ul>
<p>** open new position if there is no position for the strategy</p>
<p>** ignore signal if it’s in the same direction as existing
position</p>
<p>** close position if the signal is in the direction opposite to
existing position</p>
</dd></dl>

</section>
<section id="factory-function">
<h4>Factory Function<a class="headerlink" href="#factory-function" title="Link to this heading">¶</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="haymaker.signals.binary_signal_processor_factory">
<span class="sig-prename descclassname"><span class="pre">haymaker.signals.</span></span><span class="sig-name descname"><span class="pre">binary_signal_processor_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lockable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">always_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/signals.html#binary_signal_processor_factory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.signals.binary_signal_processor_factory" title="Link to this definition">¶</a></dt>
<dd><p>Helper function to return appropriate class based on parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lockable</strong> – True - no signals in the direction of last position if the last
position was stopped out (allowed, if position was closed through
means other than stop-loss)</p></li>
<li><p><strong>always_on</strong> – True - ‘CLOSE’ signal also opens position in reverese direction</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[<a class="reference internal" href="#haymaker.signals.AbstractBaseBinarySignalProcessor" title="haymaker.signals.AbstractBaseBinarySignalProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractBaseBinarySignalProcessor</span></code></a>]</span></p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="portfolio">
<h3>Portfolio<a class="headerlink" href="#portfolio" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.portfolio.AbstractBasePortfolio">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.portfolio.</span></span><span class="sig-name descname"><span class="pre">AbstractBasePortfolio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/portfolio.html#AbstractBasePortfolio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.portfolio.AbstractBasePortfolio" title="Link to this definition">¶</a></dt>
<dd><p>Decides what, if and how much to trade based on received signals
and queries to [SM?].</p>
<p>Each strategy should have its own instance of portfolio to ensure
that signals form various strategies should not be mixed-up.
Actual singleton <cite>porfolio</cite> object should be passed to those
instances, which should delegate allocation to this object.</p>
<dl class="py method">
<dt class="sig sig-object py" id="haymaker.portfolio.AbstractBasePortfolio.allocate">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">allocate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/portfolio.html#AbstractBasePortfolio.allocate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.portfolio.AbstractBasePortfolio.allocate" title="Link to this definition">¶</a></dt>
<dd><p>Return desired position size in contracts.  Interpretation of
this number is up to execution model.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<section id="id7">
<h4>Implementations<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.portfolio.FixedPortfolio">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.portfolio.</span></span><span class="sig-name descname"><span class="pre">FixedPortfolio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">amount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/portfolio.html#FixedPortfolio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.portfolio.FixedPortfolio" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.portfolio.FixedPortfolio.allocate">
<span class="sig-name descname"><span class="pre">allocate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/portfolio.html#FixedPortfolio.allocate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.portfolio.FixedPortfolio.allocate" title="Link to this definition">¶</a></dt>
<dd><p>Return desired position size in contracts.  Interpretation of
this number is up to execution model.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="wrapper">
<h4>Wrapper<a class="headerlink" href="#wrapper" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.portfolio.PortfolioWrapper">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.portfolio.</span></span><span class="sig-name descname"><span class="pre">PortfolioWrapper</span></span><a class="reference internal" href="_modules/haymaker/portfolio.html#PortfolioWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.portfolio.PortfolioWrapper" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="haymaker.portfolio.PortfolioWrapper.onData">
<span class="sig-name descname"><span class="pre">onData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/portfolio.html#PortfolioWrapper.onData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.portfolio.PortfolioWrapper.onData" title="Link to this definition">¶</a></dt>
<dd><p>Connected to <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> of the preceding object in the chain.
This is the entry point to any processing perfmormed by this
object.  Result of this processing should be added to the
<cite>data</cite> dict and passed to the subsequent object in the chain
using <code class="xref py py-attr docutils literal notranslate"><span class="pre">dataEvent</span></code> (by calling <cite>self.dataEvent.emit(data)</cite>).</p>
<p>It’s up to the user to emit <cite>dataEvent</cite> with appropriate data,
this event will NOT be emitted by the system, so if it’s not
properly implemented, event chain will be broken.  This method
must be obligatorily overriden in a subclass.</p>
<p>Calling superclass on exit will add a timestamp with object’s
name to <cite>data</cite>, which may be useful for logging.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>An instance of <a class="reference internal" href="#haymaker.portfolio.AbstractBasePortfolio" title="haymaker.portfolio.AbstractBasePortfolio"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.portfolio.AbstractBasePortfolio</span></code></a> should never be directly included in a processing pipeline, as there should be only one portfolio for all strategies. Instead, include an instance of <a class="reference internal" href="#haymaker.portfolio.PortfolioWrapper" title="haymaker.portfolio.PortfolioWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.portfolio.PortfolioWrapper</span></code></a> in a pipeline. As long as an instance of <a class="reference internal" href="#haymaker.portfolio.AbstractBasePortfolio" title="haymaker.portfolio.AbstractBasePortfolio"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.portfolio.AbstractBasePortfolio</span></code></a> exists in your package, <a class="reference internal" href="#haymaker.portfolio.PortfolioWrapper" title="haymaker.portfolio.PortfolioWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.portfolio.PortfolioWrapper</span></code></a> ensures it’s connected.</p>
</section>
</section>
<section id="execution-model">
<h3>Execution Model<a class="headerlink" href="#execution-model" title="Link to this heading">¶</a></h3>
<p>It’s easiest to create an execution model by extending <a class="reference internal" href="#haymaker.execution_models.AbstractExecModel" title="haymaker.execution_models.AbstractExecModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.execution_models.AbstractExecModel</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.execution_models.AbstractExecModel">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.execution_models.</span></span><span class="sig-name descname"><span class="pre">AbstractExecModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/execution_models.html#AbstractExecModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.execution_models.AbstractExecModel" title="Link to this definition">¶</a></dt>
<dd><p>Intermediary between Portfolio and Trader.  It translates strategy signals into
orders acceptable by Interactive Brokers. May also implement market execution
strategy, monitor post-order events or manage any other function related to order
execution.</p>
<dl class="py method">
<dt class="sig sig-object py" id="haymaker.execution_models.AbstractExecModel.onData">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">onData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/execution_models.html#AbstractExecModel.onData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.execution_models.AbstractExecModel.onData" title="Link to this definition">¶</a></dt>
<dd><p>Must use <code class="xref py py-meth docutils literal notranslate"><span class="pre">self.trade`(:class:`ibi.Contract()</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">ibi.Order</span></code>, strategy_key, reason) to send orders for
execution, and subsequently link any <code class="xref py py-class docutils literal notranslate"><span class="pre">ibi.Trade</span></code>
events returned by <code class="xref py py-meth docutils literal notranslate"><span class="pre">self.trade()</span></code> to required callbacks.</p>
<p>While openning position must set <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.contract</span></code> to
<code class="xref py py-class docutils literal notranslate"><span class="pre">ibi.Contract</span></code> that has been used.</p>
<p>Must keep track of current position in the market by updating
<code class="xref py py-attr docutils literal notranslate"><span class="pre">self.data.position</span></code>.</p>
<section id="id8">
<h4>Args:<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h4>
<p>data (dict): is a dict created by <code class="xref py py-class docutils literal notranslate"><span class="pre">Brick</span></code>, updated by
<code class="xref py py-class docutils literal notranslate"><span class="pre">Portfolio</span></code>, which must contain all parameters required
to execute transactions in line with this execution model.</p>
</section>
<section id="returns">
<h4>Returns:<a class="headerlink" href="#returns" title="Link to this heading">¶</a></h4>
<p>:</p>
<p>(trade, note), where:</p>
<ul class="simple">
<li><p>trade: <code class="xref py py-class docutils literal notranslate"><span class="pre">ibi.Trade</span></code> object for the issued order *</p></li>
</ul>
<p>note: info string for loggers and blotters about the character
of the transaction (open, close, stop, etc.)</p>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.execution_models.AbstractExecModel.onStart">
<span class="sig-name descname"><span class="pre">onStart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/execution_models.html#AbstractExecModel.onStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.execution_models.AbstractExecModel.onStart" title="Link to this definition">¶</a></dt>
<dd><p>Perform any initilization required on system (re)start.  It
will be run automatically and it will be linked to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> of the preceding object in the chain.</p>
<p>First <cite>Atom</cite> in a pipeline (typically a data streamer) will
be called by system, which is an indication that (re)start is
in progress and we have successfully connected to the broker.</p>
<p><cite>data</cite> by default is a dict and all keys on this dict are
being set as properties on the object.  Any information that
needs to be passed to atoms down the chain, should be appended
to <cite>data</cite> without removing any existing keys.</p>
<p>If overriding the class, call superclass; call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">super().onStart(data)()</span></code> should be the last line in overriden
method; don’t manually emit <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> in subclass.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<section id="id9">
<h4>Implementations<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="haymaker.execution_models.BaseExecModel">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.execution_models.</span></span><span class="sig-name descname"><span class="pre">BaseExecModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/execution_models.html#BaseExecModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.execution_models.BaseExecModel" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#haymaker.execution_models.AbstractExecModel" title="haymaker.execution_models.AbstractExecModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractExecModel</span></code></a></p>
<p>Orders generated based on data sent to <a class="reference internal" href="#haymaker.execution_models.BaseExecModel.onData" title="haymaker.execution_models.BaseExecModel.onData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">onData()</span></code></a>, of which
following keys are required:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">action</span></code>: must be one of: <code class="docutils literal notranslate"><span class="pre">OPEN</span></code>, <code class="docutils literal notranslate"><span class="pre">CLOSE</span></code>, <code class="docutils literal notranslate"><span class="pre">REVERSE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">signal</span></code> determines transaction direction, must be one of
{-1, 1} for sell/buy respectively; irrelevant for <code class="docutils literal notranslate"><span class="pre">CLOSE</span></code>,
where direction is determined by current position</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contract</span></code> - this <code class="xref py py-class docutils literal notranslate"><span class="pre">ibi.Contract</span></code> instance will be
traded</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">amount</span></code> - quantity of <a href="#id10"><span class="problematic" id="id11">``</span></a>contract``s that will be traded</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target_position</span></code> - one of {-1, 0, 1} determining
direction AFTER transaction is executed; will be used by
<code class="xref py py-class docutils literal notranslate"><span class="pre">Controller</span></code> to verify if the transaction’s effect
was as desired</p></li>
</ul>
</div></blockquote>
<p>Enters and closes positions based on params sent to
<a class="reference internal" href="#haymaker.execution_models.BaseExecModel.onData" title="haymaker.execution_models.BaseExecModel.onData"><code class="xref py py-meth docutils literal notranslate"><span class="pre">onData()</span></code></a>.  Orders composed by <code class="xref py py-meth docutils literal notranslate"><span class="pre">open()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code>, which can be overridden or extended in subclasses
to get more complex behaviour.</p>
<dl class="py method">
<dt class="sig sig-object py" id="haymaker.execution_models.BaseExecModel.onData">
<span class="sig-name descname"><span class="pre">onData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/execution_models.html#BaseExecModel.onData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.execution_models.BaseExecModel.onData" title="Link to this definition">¶</a></dt>
<dd><p>Must use <code class="xref py py-meth docutils literal notranslate"><span class="pre">self.trade`(:class:`ibi.Contract()</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">ibi.Order</span></code>, strategy_key, reason) to send orders for
execution, and subsequently link any <code class="xref py py-class docutils literal notranslate"><span class="pre">ibi.Trade</span></code>
events returned by <code class="xref py py-meth docutils literal notranslate"><span class="pre">self.trade()</span></code> to required callbacks.</p>
<p>While openning position must set <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.contract</span></code> to
<code class="xref py py-class docutils literal notranslate"><span class="pre">ibi.Contract</span></code> that has been used.</p>
<p>Must keep track of current position in the market by updating
<code class="xref py py-attr docutils literal notranslate"><span class="pre">self.data.position</span></code>.</p>
<section id="id12">
<h5>Args:<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h5>
<p>data (dict): is a dict created by <code class="xref py py-class docutils literal notranslate"><span class="pre">Brick</span></code>, updated by
<code class="xref py py-class docutils literal notranslate"><span class="pre">Portfolio</span></code>, which must contain all parameters required
to execute transactions in line with this execution model.</p>
</section>
<section id="id13">
<h5>Returns:<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h5>
<p>:</p>
<p>(trade, note), where:</p>
<ul class="simple">
<li><p>trade: <code class="xref py py-class docutils literal notranslate"><span class="pre">ibi.Trade</span></code> object for the issued order *</p></li>
</ul>
<p>note: info string for loggers and blotters about the character
of the transaction (open, close, stop, etc.)</p>
</section>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="haymaker.execution_models.EventDrivenExecModel">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">haymaker.execution_models.</span></span><span class="sig-name descname"><span class="pre">EventDrivenExecModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">close_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tp_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">take_profit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oca_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/execution_models.html#EventDrivenExecModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.execution_models.EventDrivenExecModel" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#haymaker.execution_models.BaseExecModel" title="haymaker.execution_models.BaseExecModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseExecModel</span></code></a></p>
<p>Use events to attach stop-loss and optional take-profit orders after
execution of open order. After close transaction remove existing
bracketing orders.</p>
<section id="parameters-keyword-only">
<h5>Parameters (keyword only):<a class="headerlink" href="#parameters-keyword-only" title="Link to this heading">¶</a></h5>
<dl class="simple">
<dt>open_order, close_order, stop_order, tp_order: dict, optional</dt><dd><p>maybe used to define order type used for respective transactions;
passed dicts will be used to extend and/or update any defaults
from config</p>
</dd>
<dt>stop: <code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractBracketLeg</span></code> instance, must be provided</dt><dd><p>manages creation of stop-loss order</p>
</dd>
<dt>take_profit: <code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractBracketLeg</span></code> instance, optional</dt><dd><p>manages creation of take-profit order</p>
</dd>
<dt>oca_type: int, default 1</dt><dd><p>OCA group type as per Interactive Brokers definition</p>
</dd>
<dt>controller: <code class="xref py py-class docutils literal notranslate"><span class="pre">Controller</span></code> instance, optional</dt><dd><p>passing <code class="xref py py-class docutils literal notranslate"><span class="pre">Controller</span></code> is meant for testing;
otherwise the system should be allowed to use its own
mechanisms to create it</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="haymaker.execution_models.EventDrivenExecModel.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynamic_order_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/execution_models.html#EventDrivenExecModel.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.execution_models.EventDrivenExecModel.close" title="Link to this definition">¶</a></dt>
<dd><p>On top of actions perfomed by base class, this method will:
attach oca that will cancel any brackets after order execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.order.Trade" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.execution_models.EventDrivenExecModel.onStart">
<span class="sig-name descname"><span class="pre">onStart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/execution_models.html#EventDrivenExecModel.onStart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.execution_models.EventDrivenExecModel.onStart" title="Link to this definition">¶</a></dt>
<dd><p>Perform any initilization required on system (re)start.  It
will be run automatically and it will be linked to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> of the preceding object in the chain.</p>
<p>First <cite>Atom</cite> in a pipeline (typically a data streamer) will
be called by system, which is an indication that (re)start is
in progress and we have successfully connected to the broker.</p>
<p><cite>data</cite> by default is a dict and all keys on this dict are
being set as properties on the object.  Any information that
needs to be passed to atoms down the chain, should be appended
to <cite>data</cite> without removing any existing keys.</p>
<p>If overriding the class, call superclass; call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">super().onStart(data)()</span></code> should be the last line in overriden
method; don’t manually emit <code class="xref py py-attr docutils literal notranslate"><span class="pre">startEvent</span></code> in subclass.</p>
<p>This method can be synchronous as well as asynchronous (in the
subclass it’s ok to override it with <cite>async def onData(self,
data, *args)</cite>).  If it’s async, it will be put in the asyncio
loop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="haymaker.execution_models.EventDrivenExecModel.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynamic_order_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/haymaker/execution_models.html#EventDrivenExecModel.open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#haymaker.execution_models.EventDrivenExecModel.open" title="Link to this definition">¶</a></dt>
<dd><p>On top of actions perfomed by base class, this method will:
save information required for bracket orders and attach events
that will attach brackets after order completion.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.order.Trade" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a> | <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</section>
</dd></dl>

<p>This model automatically places stop-loss orders (and potentially take-profit orders) when the original order is filled.</p>
</section>
</section>
</section>
<section id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">ib_insync</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ibi</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">haymaker</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">aggregators</span><span class="p">,</span>
    <span class="n">app</span><span class="p">,</span>
    <span class="n">base</span><span class="p">,</span>
    <span class="n">bracket_legs</span><span class="p">,</span>
    <span class="n">brick</span><span class="p">,</span>
    <span class="n">execution_models</span><span class="p">,</span>
    <span class="n">indicators</span><span class="p">,</span>
    <span class="n">portfolio</span><span class="p">,</span>
    <span class="n">signals</span><span class="p">,</span>
    <span class="n">streamers</span><span class="p">,</span>
<span class="p">)</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">EMACrossStrategy</span><span class="p">(</span><span class="n">brick</span><span class="o">.</span><span class="n">AbstractDfBrick</span><span class="p">):</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">contract</span><span class="p">:</span> <span class="n">ibi</span><span class="o">.</span><span class="n">Contract</span>
    <span class="n">fast_lookback</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">slow_lookback</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">atr_lookback</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;fast_ema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fast_lookback</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;slow_ema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slow_lookback</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;signal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;fast_ema&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;slow_ema&quot;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;atr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">atr</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">atr_lookback</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df</span>


<span class="n">es_contract</span> <span class="o">=</span> <span class="n">ibi</span><span class="o">.</span><span class="n">ContFuture</span><span class="p">(</span><span class="s2">&quot;ES&quot;</span><span class="p">,</span> <span class="s2">&quot;CME&quot;</span><span class="p">)</span>

<span class="n">portfolio</span><span class="o">.</span><span class="n">FixedPortfolio</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="n">pipe</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Pipe</span><span class="p">(</span>
    <span class="n">streamers</span><span class="o">.</span><span class="n">HistoricalDataStreamer</span><span class="p">(</span><span class="n">es_contract</span><span class="p">,</span> <span class="s2">&quot;10 D&quot;</span><span class="p">,</span> <span class="s2">&quot;1 hours&quot;</span><span class="p">,</span> <span class="s2">&quot;TRADES&quot;</span><span class="p">),</span>
    <span class="n">aggregators</span><span class="o">.</span><span class="n">BarAggregator</span><span class="p">(</span><span class="n">aggregators</span><span class="o">.</span><span class="n">NoFilter</span><span class="p">()),</span>
    <span class="n">EMACrossStrategy</span><span class="p">(</span><span class="s2">&quot;ema_cross_ES&quot;</span><span class="p">,</span> <span class="n">es_contract</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">BinarySignalProcessor</span><span class="p">(),</span>
    <span class="n">portfolio</span><span class="o">.</span><span class="n">PortfolioWrapper</span><span class="p">(),</span>
    <span class="n">execution_models</span><span class="o">.</span><span class="n">EventDrivenExecModel</span><span class="p">(</span>
        <span class="n">stop</span><span class="o">=</span><span class="n">bracket_legs</span><span class="o">.</span><span class="n">TrailingStop</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">vol_field</span><span class="o">=</span><span class="s2">&quot;atr&quot;</span><span class="p">)</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">App</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>NOT INVESTMENT ADVICE</strong></p>
<p>This example is only meant to illustrate how to use the Haymaker framework. It is unlikely to produce favorable investment outcomes.</p>
</div>
<section id="example-walk-through">
<h3>Example Walk-Through<a class="headerlink" href="#example-walk-through" title="Link to this heading">¶</a></h3>
<p>This is a simple example implementing a <a class="reference external" href="https://en.wikipedia.org/wiki/Moving_average_crossover">moving average crossover</a> strategy with a stop-loss.</p>
<p>The strategy:</p>
<ul class="simple">
<li><p>Buys 1 <a class="reference external" href="https://www.cmegroup.com/markets/equities/sp/e-mini-sandp500.html">e-mini S&amp;P futures contract (‘ES’)</a> whenever the faster exponential moving average (EMA) crosses above the slower one.</p></li>
<li><p>Sells 1 contract when the faster EMA crosses below the slower EMA.</p></li>
<li><p>The moment a position-opening order is filled, places a <a class="reference external" href="https://www.investopedia.com/terms/t/trailingstop.asp">trailing stop-loss order</a> with a distance based on the current instrument’s <a class="reference external" href="https://www.investopedia.com/terms/a/atr.asp">Average True Range</a>.</p></li>
<li><p>Whenever the stop-loss is hit, prevents reopening a position in the same direction until an opposite position is opened and closed. This protects against repeated transactions in a volatile, non-trending market.</p></li>
<li><p>Reverses the position when a signal indicates a direction opposite to the position currently held.</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Defining the EMA crossover strategy</span><a class="headerlink" href="#id14" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">haymaker</span><span class="w"> </span><span class="kn">import</span> <span class="n">brick</span><span class="p">,</span> <span class="n">indicators</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ib_insync</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ibi</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">EMACrossStrategy</span><span class="p">(</span><span class="n">brick</span><span class="o">.</span><span class="n">AbstractDfBrick</span><span class="p">):</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">contract</span><span class="p">:</span> <span class="n">ibi</span><span class="o">.</span><span class="n">Contract</span>
    <span class="n">fast_lookback</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">slow_lookback</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">atr_lookback</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;fast_ema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fast_lookback</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;slow_ema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slow_lookback</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;signal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;fast_ema&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;slow_ema&quot;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;atr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">indicators</span><span class="o">.</span><span class="n">atr</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">atr_lookback</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
<p>This defines the trading signals using <a class="reference internal" href="#haymaker.brick.AbstractDfBrick" title="haymaker.brick.AbstractDfBrick"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.brick.AbstractDfBrick</span></code></a>. It requires a <code class="xref py py-class docutils literal notranslate"><span class="pre">dataclasses.dataclass</span></code> with the strategy name, contract, and parameters. The <code class="xref py py-meth docutils literal notranslate"><span class="pre">haymaker.brick.AbstractDfBrick.df()</span></code> method must be overridden to process a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> containing market data (e.g., Open, High, Low, Close, Volume, AveragePrice), depending on the connected streamers and processors.</p>
<p>The data received via <cite>onData</cite> is wrapped into a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> with column names matching the keys in the <cite>data</cite> dictionary. Users must ensure upstream components provide all required data for signal generation.</p>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">haymaker.brick.AbstractDfBrick.df()</span></code> method must return a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> with a <code class="docutils literal notranslate"><span class="pre">signal</span></code> column: 1 for long, 0 for no position, -1 for short. Additional columns (e.g., <code class="docutils literal notranslate"><span class="pre">atr</span></code>) can be included for downstream components.</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">Defining the ES futures contract</span><a class="headerlink" href="#id15" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">es_contract</span> <span class="o">=</span> <span class="n">ibi</span><span class="o">.</span><span class="n">ContFuture</span><span class="p">(</span><span class="s2">&quot;ES&quot;</span><span class="p">,</span> <span class="s2">&quot;CME&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.contracts.ContFuture</span></code> contract is not directly tradable. Haymaker replaces it with the current on-the-run futures contract and rolls it to the next contract near expiration. Refer to other documentation sections for customization details.</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">Setting a fixed portfolio size</span><a class="headerlink" href="#id16" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">haymaker</span><span class="w"> </span><span class="kn">import</span> <span class="n">portfolio</span>
<span class="n">portfolio</span><span class="o">.</span><span class="n">FixedPortfolio</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Typically, a <a class="reference internal" href="#haymaker.portfolio.FixedPortfolio" title="haymaker.portfolio.FixedPortfolio"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.portfolio.FixedPortfolio</span></code></a> would include more logic. Here, it trades one contract regardless of circumstances—a simplistic approach not recommended for real use.</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">Assembling the pipeline</span><a class="headerlink" href="#id17" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">haymaker</span><span class="w"> </span><span class="kn">import</span> <span class="n">base</span><span class="p">,</span> <span class="n">streamers</span><span class="p">,</span> <span class="n">aggregators</span><span class="p">,</span> <span class="n">signals</span><span class="p">,</span> <span class="n">execution_models</span><span class="p">,</span> <span class="n">portfolio</span><span class="p">,</span> <span class="n">bracket_legs</span>

<span class="n">pipe</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">Pipe</span><span class="p">(</span>
    <span class="n">streamers</span><span class="o">.</span><span class="n">HistoricalDataStreamer</span><span class="p">(</span><span class="n">es_contract</span><span class="p">,</span> <span class="s2">&quot;10 D&quot;</span><span class="p">,</span> <span class="s2">&quot;1 hour&quot;</span><span class="p">,</span> <span class="s2">&quot;TRADES&quot;</span><span class="p">),</span>
    <span class="n">aggregators</span><span class="o">.</span><span class="n">BarAggregator</span><span class="p">(</span><span class="n">aggregators</span><span class="o">.</span><span class="n">NoFilter</span><span class="p">()),</span>
    <span class="n">EMACrossStrategy</span><span class="p">(</span><span class="s2">&quot;ema_cross_ES&quot;</span><span class="p">,</span> <span class="n">es_contract</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">BinarySignalProcessor</span><span class="p">(),</span>
    <span class="n">portfolio</span><span class="o">.</span><span class="n">PortfolioWrapper</span><span class="p">(),</span>
    <span class="n">execution_models</span><span class="o">.</span><span class="n">EventDrivenExecModel</span><span class="p">(</span>
        <span class="n">stop</span><span class="o">=</span><span class="n">bracket_legs</span><span class="o">.</span><span class="n">TrailingStop</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">vol_field</span><span class="o">=</span><span class="s2">&quot;atr&quot;</span><span class="p">)</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>The <a class="reference internal" href="#haymaker.base.Pipe" title="haymaker.base.Pipe"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.base.Pipe</span></code></a> connects components into an event-driven pipeline. Market data from the streamer triggers processing, potentially resulting in broker orders.</p>
<p>Components used:</p>
<ul>
<li><div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">Historical data streamer</span><a class="headerlink" href="#id18" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">streamers</span><span class="o">.</span><span class="n">HistoricalDataStreamer</span><span class="p">(</span><span class="n">es_contract</span><span class="p">,</span> <span class="s2">&quot;10 D&quot;</span><span class="p">,</span> <span class="s2">&quot;1 hour&quot;</span><span class="p">,</span> <span class="s2">&quot;TRADES&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Pulls 10 days of 1-hour “TRADES” data for <code class="docutils literal notranslate"><span class="pre">es_contract</span></code> from the broker, updating with new data points. The framework automatically fills gaps if disruptions occur.</p>
</li>
<li><div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">No-op aggregator</span><a class="headerlink" href="#id19" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">aggregators</span><span class="o">.</span><span class="n">BarAggregator</span><span class="p">(</span><span class="n">aggregators</span><span class="o">.</span><span class="n">NoFilter</span><span class="p">())</span>
</pre></div>
</div>
</div>
<p>No aggregation or processing is applied (using <a class="reference internal" href="#haymaker.aggregators.NoFilter" title="haymaker.aggregators.NoFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.aggregators.NoFilter</span></code></a>). An aggregator is currently required with historical data streamers to track history.</p>
</li>
<li><div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">EMA crossover strategy instance</span><a class="headerlink" href="#id20" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">EMACrossStrategy</span><span class="p">(</span><span class="s2">&quot;ema_cross_ES&quot;</span><span class="p">,</span> <span class="n">es_contract</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Instantiates the strategy with arbitrary parameters: 12-hour and 48-hour EMAs, 24-hour ATR.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These parameters are illustrative and not optimized.</p>
</div>
</li>
<li><div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">Binary signal processor</span><a class="headerlink" href="#id21" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">signals</span><span class="o">.</span><span class="n">BinarySignalProcessor</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>The <a class="reference internal" href="#haymaker.signals.BinarySignalProcessor" title="haymaker.signals.BinarySignalProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.signals.BinarySignalProcessor</span></code></a> ensures:
* Repeated signals in the same direction are ignored if a position exists.
* Post-stop-loss, prevents reopening in the same direction until an opposite position is cycled.
* Reverses positions on opposing signals.</p>
</li>
<li><div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">Portfolio wrapper</span><a class="headerlink" href="#id22" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">portfolio</span><span class="o">.</span><span class="n">PortfolioWrapper</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Connects to a single global <a class="reference internal" href="#haymaker.portfolio.FixedPortfolio" title="haymaker.portfolio.FixedPortfolio"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.portfolio.FixedPortfolio</span></code></a> instance, ensuring strategy-specific data flows correctly to downstream components.</p>
</li>
<li><div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-text">Event-driven execution model</span><a class="headerlink" href="#id23" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">execution_models</span><span class="o">.</span><span class="n">EventDrivenExecModel</span><span class="p">(</span>
    <span class="n">stop</span><span class="o">=</span><span class="n">bracket_legs</span><span class="o">.</span><span class="n">TrailingStop</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">vol_field</span><span class="o">=</span><span class="s2">&quot;atr&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Sends a <a class="reference external" href="https://ib-insync.readthedocs.io/api.html#ib_insync.order.MarketOrder" title="(in ib_insync v0.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ib_insync.order.MarketOrder</span></code></a> to the broker. Upon fill, places a trailing stop-loss order with a distance of 3×ATR (requires an <code class="docutils literal notranslate"><span class="pre">atr</span></code> column from the <a class="reference internal" href="#haymaker.brick.AbstractDfBrick" title="haymaker.brick.AbstractDfBrick"><code class="xref py py-class docutils literal notranslate"><span class="pre">haymaker.brick.AbstractDfBrick</span></code></a>).</p>
</li>
</ul>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-text">Running the application</span><a class="headerlink" href="#id24" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">haymaker</span><span class="w"> </span><span class="kn">import</span> <span class="n">app</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">App</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Run this as a script (e.g., <code class="docutils literal notranslate"><span class="pre">strategy.py</span></code>):</p>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-text">Starting the strategy</span><a class="headerlink" href="#id25" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>strategy.py
</pre></div>
</div>
</div>
<p>Ensure <code class="docutils literal notranslate"><span class="pre">python</span></code> is the correct interpreter. Long-running scripts should be managed as processes (see process management documentation—link TBD).</p>
</section>
<section id="conclusion">
<h3>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">¶</a></h3>
<p>In real-world strategies, you’d trade multiple instruments and parameter sets. Using the patterns above with Python data structures, you can create pipelines for as many combinations as needed.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="dataloader.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Dataloader Module</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="logging.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Logging</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, t1user
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Execution Module</a><ul>
<li><a class="reference internal" href="#atom-object">Atom Object</a><ul>
<li><a class="reference internal" href="#haymaker.base.Atom"><code class="docutils literal notranslate"><span class="pre">Atom</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.base.Atom.contract"><code class="docutils literal notranslate"><span class="pre">Atom.contract</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.which_contract"><code class="docutils literal notranslate"><span class="pre">Atom.which_contract</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.ib"><code class="docutils literal notranslate"><span class="pre">Atom.ib</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.sm"><code class="docutils literal notranslate"><span class="pre">Atom.sm</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.contracts"><code class="docutils literal notranslate"><span class="pre">Atom.contracts</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.events"><code class="docutils literal notranslate"><span class="pre">Atom.events</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.connect"><code class="docutils literal notranslate"><span class="pre">Atom.connect()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.details"><code class="docutils literal notranslate"><span class="pre">Atom.details</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.disconnect"><code class="docutils literal notranslate"><span class="pre">Atom.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.onContractChanged"><code class="docutils literal notranslate"><span class="pre">Atom.onContractChanged()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.onData"><code class="docutils literal notranslate"><span class="pre">Atom.onData()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.onFeedback"><code class="docutils literal notranslate"><span class="pre">Atom.onFeedback()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.onStart"><code class="docutils literal notranslate"><span class="pre">Atom.onStart()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Atom.pipe"><code class="docutils literal notranslate"><span class="pre">Atom.pipe()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#auxiliary-objects">Auxiliary Objects</a><ul>
<li><a class="reference internal" href="#haymaker.base.Pipe"><code class="docutils literal notranslate"><span class="pre">Pipe</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.base.Pipe.connect"><code class="docutils literal notranslate"><span class="pre">Pipe.connect()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Pipe.disconnect"><code class="docutils literal notranslate"><span class="pre">Pipe.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Pipe.onData"><code class="docutils literal notranslate"><span class="pre">Pipe.onData()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Pipe.onFeedback"><code class="docutils literal notranslate"><span class="pre">Pipe.onFeedback()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Pipe.onStart"><code class="docutils literal notranslate"><span class="pre">Pipe.onStart()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#haymaker.base.Details"><code class="docutils literal notranslate"><span class="pre">Details</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.base.Details.details"><code class="docutils literal notranslate"><span class="pre">Details.details</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Details.trading_hours"><code class="docutils literal notranslate"><span class="pre">Details.trading_hours</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Details.liquid_hours"><code class="docutils literal notranslate"><span class="pre">Details.liquid_hours</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Details.is_liquid"><code class="docutils literal notranslate"><span class="pre">Details.is_liquid()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Details.is_open"><code class="docutils literal notranslate"><span class="pre">Details.is_open()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.base.Details.next_open"><code class="docutils literal notranslate"><span class="pre">Details.next_open()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#strategy-building-components">Strategy Building Components</a><ul>
<li><a class="reference internal" href="#streamer">Streamer</a><ul>
<li><a class="reference internal" href="#haymaker.streamers.Streamer"><code class="docutils literal notranslate"><span class="pre">Streamer</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.streamers.Streamer.awaitables"><code class="docutils literal notranslate"><span class="pre">Streamer.awaitables()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.streamers.Streamer.onStart"><code class="docutils literal notranslate"><span class="pre">Streamer.onStart()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.streamers.Streamer.run"><code class="docutils literal notranslate"><span class="pre">Streamer.run()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementations">Implementations</a><ul>
<li><a class="reference internal" href="#haymaker.streamers.HistoricalDataStreamer"><code class="docutils literal notranslate"><span class="pre">HistoricalDataStreamer</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.streamers.HistoricalDataStreamer.date_to_delta"><code class="docutils literal notranslate"><span class="pre">HistoricalDataStreamer.date_to_delta()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.streamers.HistoricalDataStreamer.onContractChanged"><code class="docutils literal notranslate"><span class="pre">HistoricalDataStreamer.onContractChanged()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.streamers.HistoricalDataStreamer.onStart"><code class="docutils literal notranslate"><span class="pre">HistoricalDataStreamer.onStart()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.streamers.HistoricalDataStreamer.run"><code class="docutils literal notranslate"><span class="pre">HistoricalDataStreamer.run()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#haymaker.streamers.MktDataStreamer"><code class="docutils literal notranslate"><span class="pre">MktDataStreamer</span></code></a></li>
<li><a class="reference internal" href="#haymaker.streamers.RealTimeBarsStreamer"><code class="docutils literal notranslate"><span class="pre">RealTimeBarsStreamer</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.streamers.RealTimeBarsStreamer.onStart"><code class="docutils literal notranslate"><span class="pre">RealTimeBarsStreamer.onStart()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#haymaker.streamers.TickByTickStreamer"><code class="docutils literal notranslate"><span class="pre">TickByTickStreamer</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#aggregator">Aggregator</a><ul>
<li><a class="reference internal" href="#haymaker.aggregators.BarAggregator"><code class="docutils literal notranslate"><span class="pre">BarAggregator</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.aggregators.BarAggregator.adjust_future"><code class="docutils literal notranslate"><span class="pre">BarAggregator.adjust_future()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.aggregators.BarAggregator.onData"><code class="docutils literal notranslate"><span class="pre">BarAggregator.onData()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.aggregators.BarAggregator.onDataBar"><code class="docutils literal notranslate"><span class="pre">BarAggregator.onDataBar()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.aggregators.BarAggregator.onStart"><code class="docutils literal notranslate"><span class="pre">BarAggregator.onStart()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#available-filters">Available Filters</a><ul>
<li><a class="reference internal" href="#haymaker.aggregators.CountBars"><code class="docutils literal notranslate"><span class="pre">CountBars</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.aggregators.CountBars.on_source"><code class="docutils literal notranslate"><span class="pre">CountBars.on_source()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#haymaker.aggregators.VolumeBars"><code class="docutils literal notranslate"><span class="pre">VolumeBars</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.aggregators.VolumeBars.on_source"><code class="docutils literal notranslate"><span class="pre">VolumeBars.on_source()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#haymaker.aggregators.TickBars"><code class="docutils literal notranslate"><span class="pre">TickBars</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.aggregators.TickBars.on_source"><code class="docutils literal notranslate"><span class="pre">TickBars.on_source()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#haymaker.aggregators.TimeBars"><code class="docutils literal notranslate"><span class="pre">TimeBars</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.aggregators.TimeBars.on_source"><code class="docutils literal notranslate"><span class="pre">TimeBars.on_source()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#haymaker.aggregators.NoFilter"><code class="docutils literal notranslate"><span class="pre">NoFilter</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.aggregators.NoFilter.on_source"><code class="docutils literal notranslate"><span class="pre">NoFilter.on_source()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#brick">Brick</a><ul>
<li><a class="reference internal" href="#haymaker.brick.AbstractBaseBrick"><code class="docutils literal notranslate"><span class="pre">AbstractBaseBrick</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.brick.AbstractBaseBrick.onData"><code class="docutils literal notranslate"><span class="pre">AbstractBaseBrick.onData()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.brick.AbstractBaseBrick.onStart"><code class="docutils literal notranslate"><span class="pre">AbstractBaseBrick.onStart()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id5">Implementations</a><ul>
<li><a class="reference internal" href="#haymaker.brick.AbstractDfBrick"><code class="docutils literal notranslate"><span class="pre">AbstractDfBrick</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#signal-processor">Signal Processor</a><ul>
<li><a class="reference internal" href="#haymaker.signals.AbstractBaseBinarySignalProcessor"><code class="docutils literal notranslate"><span class="pre">AbstractBaseBinarySignalProcessor</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.signals.AbstractBaseBinarySignalProcessor.onData"><code class="docutils literal notranslate"><span class="pre">AbstractBaseBinarySignalProcessor.onData()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.signals.AbstractBaseBinarySignalProcessor.position"><code class="docutils literal notranslate"><span class="pre">AbstractBaseBinarySignalProcessor.position()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.signals.AbstractBaseBinarySignalProcessor.same_direction"><code class="docutils literal notranslate"><span class="pre">AbstractBaseBinarySignalProcessor.same_direction()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">Implementations</a><ul>
<li><a class="reference internal" href="#haymaker.signals.BinarySignalProcessor"><code class="docutils literal notranslate"><span class="pre">BinarySignalProcessor</span></code></a></li>
<li><a class="reference internal" href="#haymaker.signals.BlipBinarySignalProcessor"><code class="docutils literal notranslate"><span class="pre">BlipBinarySignalProcessor</span></code></a></li>
<li><a class="reference internal" href="#haymaker.signals.LockableBinarySignalProcessor"><code class="docutils literal notranslate"><span class="pre">LockableBinarySignalProcessor</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.signals.LockableBinarySignalProcessor.onData"><code class="docutils literal notranslate"><span class="pre">LockableBinarySignalProcessor.onData()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#haymaker.signals.LockableBlipBinarySignalProcessor"><code class="docutils literal notranslate"><span class="pre">LockableBlipBinarySignalProcessor</span></code></a></li>
<li><a class="reference internal" href="#haymaker.signals.AlwaysOnLockableBinarySignalProcessor"><code class="docutils literal notranslate"><span class="pre">AlwaysOnLockableBinarySignalProcessor</span></code></a></li>
<li><a class="reference internal" href="#haymaker.signals.AlwaysOnBinarySignalProcessor"><code class="docutils literal notranslate"><span class="pre">AlwaysOnBinarySignalProcessor</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#factory-function">Factory Function</a><ul>
<li><a class="reference internal" href="#haymaker.signals.binary_signal_processor_factory"><code class="docutils literal notranslate"><span class="pre">binary_signal_processor_factory()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#portfolio">Portfolio</a><ul>
<li><a class="reference internal" href="#haymaker.portfolio.AbstractBasePortfolio"><code class="docutils literal notranslate"><span class="pre">AbstractBasePortfolio</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.portfolio.AbstractBasePortfolio.allocate"><code class="docutils literal notranslate"><span class="pre">AbstractBasePortfolio.allocate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7">Implementations</a><ul>
<li><a class="reference internal" href="#haymaker.portfolio.FixedPortfolio"><code class="docutils literal notranslate"><span class="pre">FixedPortfolio</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.portfolio.FixedPortfolio.allocate"><code class="docutils literal notranslate"><span class="pre">FixedPortfolio.allocate()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#wrapper">Wrapper</a><ul>
<li><a class="reference internal" href="#haymaker.portfolio.PortfolioWrapper"><code class="docutils literal notranslate"><span class="pre">PortfolioWrapper</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.portfolio.PortfolioWrapper.onData"><code class="docutils literal notranslate"><span class="pre">PortfolioWrapper.onData()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#execution-model">Execution Model</a><ul>
<li><a class="reference internal" href="#haymaker.execution_models.AbstractExecModel"><code class="docutils literal notranslate"><span class="pre">AbstractExecModel</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.execution_models.AbstractExecModel.onData"><code class="docutils literal notranslate"><span class="pre">AbstractExecModel.onData()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.execution_models.AbstractExecModel.onStart"><code class="docutils literal notranslate"><span class="pre">AbstractExecModel.onStart()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id9">Implementations</a><ul>
<li><a class="reference internal" href="#haymaker.execution_models.BaseExecModel"><code class="docutils literal notranslate"><span class="pre">BaseExecModel</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.execution_models.BaseExecModel.onData"><code class="docutils literal notranslate"><span class="pre">BaseExecModel.onData()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#haymaker.execution_models.EventDrivenExecModel"><code class="docutils literal notranslate"><span class="pre">EventDrivenExecModel</span></code></a><ul>
<li><a class="reference internal" href="#haymaker.execution_models.EventDrivenExecModel.close"><code class="docutils literal notranslate"><span class="pre">EventDrivenExecModel.close()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.execution_models.EventDrivenExecModel.onStart"><code class="docutils literal notranslate"><span class="pre">EventDrivenExecModel.onStart()</span></code></a></li>
<li><a class="reference internal" href="#haymaker.execution_models.EventDrivenExecModel.open"><code class="docutils literal notranslate"><span class="pre">EventDrivenExecModel.open()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#example-usage">Example Usage</a><ul>
<li><a class="reference internal" href="#example-walk-through">Example Walk-Through</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>